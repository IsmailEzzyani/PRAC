<html>
    <head>
        <title>PRAC ‚Äî Exchange Rates</title>
        <style>
            :root {
                --bg: #050506;
                --card: #0b0b0c;
                --muted: #9aa0a6;
                --accent1: #7c3aed;
                --accent2: #00d4ff;
                --glass: rgba(255,255,255,0.03);
                --maxw: 1200px;
                --radius-xl: 28px;
                --radius-md: 12px;
                --ease: cubic-bezier(.18,.9,.32,1);
            }
            * { box-sizing: border-box; margin: 0; padding: 0; }
            html, body { height: 100%; }
            body {
                min-height: 100%;
                font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
                background: radial-gradient(1200px 600px at 10% 10%, rgba(123,60,255,0.08), transparent),
                            radial-gradient(900px 500px at 90% 80%, rgba(34,211,238,0.06), transparent),
                            var(--bg);
                color: #fff;
                -webkit-font-smoothing: antialiased;
                line-height: 1.4;
            }

            .container { max-width: var(--maxw); margin: 0 auto; padding: 0 20px; }

            header.nav {
                position: sticky; top: 0; z-index: 40;
                backdrop-filter: blur(12px) saturate(180%);
                background: linear-gradient(180deg, rgba(11,11,12,0.85), rgba(11,11,12,0.7));
                border-bottom: 1px solid rgba(255,255,255,0.05);
            }
            .nav-inner { display: flex; align-items: center; justify-content: space-between; padding: 18px 0; }
            .logo { display: flex; align-items: center; gap: 12px; text-decoration: none; color: inherit; }
            .logo-mark {
                width: 44px; height: 44px; border-radius: 10px;
                background: linear-gradient(135deg, var(--accent1), #ff6fb9);
                display: inline-flex; align-items: center; justify-content: center;
                font-weight: 800;
            }
            .logo-text { font-weight: 700; letter-spacing: 1px; }
            nav.main-nav { display: flex; align-items: center; gap: 18px; }
            nav.main-nav a {
                color: var(--muted); text-decoration: none; font-size: 15px; padding: 8px 12px; border-radius: 8px;
                transition: all 0.3s var(--ease);
            }
            nav.main-nav a:hover { color: #fff; }
            nav.main-nav a.active {
                color: #a78bfa;
                background: rgba(124, 58, 237, 0.1);
            }

            .btn {
                padding: 10px 18px; border-radius: 10px; text-decoration: none;
                font-weight: 600; cursor: pointer; border: none;
                transition: all 0.3s var(--ease);
                display: inline-block;
            }
            .btn.ghost {
                background: rgba(255,255,255,0.03);
                border: 1px solid rgba(255,255,255,0.1);
                color: var(--muted);
            }
            .btn.primary {
                background: linear-gradient(90deg, var(--accent1), #ff6fb9);
                box-shadow: 0 8px 30px rgba(124,58,237,0.25);
                color: white;
            }

            .rates-hero {
                padding: 80px 0;
                background: linear-gradient(135deg, rgba(91,33,182,0.1), rgba(124,58,237,0.05));
                text-align: center;
            }

            h1 {
                font-size: 52px; line-height: 1.1; margin-bottom: 20px; font-weight: 800;
                letter-spacing: -0.02em;
            }

            .subtitle {
                color: var(--muted);
                font-size: 18px;
                margin-bottom: 48px;
                max-width: 70ch;
                margin-left: auto;
                margin-right: auto;
            }

            .rates-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
                gap: 20px;
                margin: 40px 0;
            }

            .rate-card {
                background: linear-gradient(135deg, rgba(124,58,237,0.1), rgba(0,212,255,0.05));
                border-radius: var(--radius-xl);
                padding: 24px;
                text-align: center;
                border: 1px solid rgba(124,58,237,0.2);
                transition: all 0.3s var(--ease);
            }

            .rate-card:hover {
                transform: translateY(-8px);
                box-shadow: 0 20px 60px rgba(124,58,237,0.3);
                background: linear-gradient(135deg, rgba(124,58,237,0.15), rgba(0,212,255,0.08));
            }

            .rate-value {
                font-size: 36px;
                font-weight: 800;
                background: linear-gradient(90deg, var(--accent1), var(--accent2));
                -webkit-background-clip: text;
                background-clip: text;
                color: transparent;
                margin: 16px 0;
            }

            .feature {
                background: rgba(255,255,255,0.02);
                padding: 24px; border-radius: 16px;
                border: 1px solid rgba(255,255,255,0.04);
                margin: 60px 0;
            }

            .grid-3 { display: grid; grid-template-columns: repeat(3,1fr); gap: 20px; }

            .footer {
                padding: 48px 0; color: var(--muted); font-size: 14px;
                text-align: center; border-top: 1px solid rgba(255,255,255,0.03);
                margin-top: 60px;
            }

            /* üåç ENHANCED WORLD RATES TABLE */
            #world-rates {
                margin-top: 80px;
                padding: 40px;
                background: linear-gradient(135deg, rgba(124,58,237,0.05), rgba(0,212,255,0.03));
                border-radius: 20px;
                border: 1px solid rgba(124,58,237,0.1);
                position: relative;
                overflow: hidden;
            }

            #world-rates::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                height: 3px;
                background: linear-gradient(90deg, var(--accent1), var(--accent2));
            }

            #rates-table {
                max-height: 600px;
                overflow-y: auto;
                margin-top: 30px;
                border-radius: 14px;
                border: 1px solid rgba(255,255,255,0.06);
                background: rgba(255,255,255,0.02);
                backdrop-filter: blur(10px);
            }

            /* Custom scrollbar */
            #rates-table::-webkit-scrollbar {
                width: 8px;
            }

            #rates-table::-webkit-scrollbar-track {
                background: rgba(255,255,255,0.02);
                border-radius: 4px;
            }

            #rates-table::-webkit-scrollbar-thumb {
                background: linear-gradient(180deg, var(--accent1), var(--accent2));
                border-radius: 4px;
            }

            table {
                width: 100%;
                border-collapse: collapse;
            }

            th, td {
                padding: 16px;
                text-align: left;
                border-bottom: 1px solid rgba(255,255,255,0.04);
                transition: all 0.3s var(--ease);
            }

            th {
                background: rgba(255,255,255,0.05);
                font-weight: 600;
                color: #a78bfa;
                position: sticky;
                top: 0;
                backdrop-filter: blur(10px);
            }

            tr:hover {
                background: rgba(255,255,255,0.03);
            }

            .currency-flag {
                width: 24px;
                height: 16px;
                border-radius: 2px;
                margin-right: 12px;
                display: inline-block;
                vertical-align: middle;
                box-shadow: 0 2px 8px rgba(0,0,0,0.2);
            }

            .currency-code {
                font-weight: 600;
                color: #fff;
            }

            .currency-name {
                color: var(--muted);
                font-size: 12px;
                margin-left: 8px;
            }

            .rate-change {
                font-size: 12px;
                padding: 4px 8px;
                border-radius: 12px;
                font-weight: 600;
            }

            .rate-change.positive {
                background: rgba(90, 247, 142, 0.15);
                color: #5af78e;
            }

            .rate-change.negative {
                background: rgba(255, 107, 107, 0.15);
                color: #ff6b6b;
            }

            .search-box {
                background: rgba(255,255,255,0.03);
                border: 1px solid rgba(255,255,255,0.1);
                border-radius: var(--radius-md);
                padding: 12px 16px;
                color: white;
                font-size: 16px;
                width: 100%;
                margin-bottom: 20px;
                transition: all 0.3s var(--ease);
            }

            .search-box:focus {
                outline: none;
                border-color: var(--accent1);
                box-shadow: 0 0 0 3px rgba(124,58,237,0.1);
            }

            .currency-symbol {
                font-size: 18px;
                margin-right: 8px;
                opacity: 0.8;
            }

            @media (max-width: 980px) {
                .grid-3 { grid-template-columns: 1fr; }
                h1 { font-size: 40px; }
                th, td { padding: 12px 8px; }
            }

            @media (max-width: 540px) {
                .logo-text { display: none; }
                h1 { font-size: 32px; }
                .rates-grid { grid-template-columns: 1fr; }
                #world-rates { padding: 20px; }
            }
        </style>
    </head>
    <body>

        <!-- NAVIGATION -->
        <header class="nav">
            <div class="container nav-inner">
                <a class="logo" href="index.html">
                    <div class="logo-mark">P</div>
                    <div class="logo-text">PRAC</div>
                </a>

                <nav class="main-nav">
                    <a href="rates.html" class="active">Rates</a>
                    <a href="dashboard.html">Dashboard</a>
                    <a class="btn ghost" href="#" id="logoutBtn">Log out</a>
                </nav>
            </div>
        </header>

        <!-- HERO -->
        <div class="rates-hero">
            <div class="container">
                <h1>Live Exchange Rates</h1>
                <p class="subtitle">Real-time currency rates with no hidden fees. What you see is what you get.</p>
            </div>
        </div>

        <div class="container">

            <!-- Rate cards from API -->
            <div class="rates-grid" id="ratesGrid">
                <!-- Rates will be loaded from API -->
            </div>

            <!-- Features section -->
            <div class="feature">
                <h3 style="margin-bottom: 16px; text-align: center;">Why our rates are better</h3>
                <div class="grid-3">
                    <div class="feature">
                        <strong>üí∞ Real market rates</strong>
                        <p style="color: var(--muted); margin-top: 8px;">We use live interbank rates with minimal markup, saving you money on every transaction.</p>
                    </div>
                    <div class="feature">
                        <strong>üíé No hidden fees</strong>
                        <p style="color: var(--muted); margin-top: 8px;">See the exact amount you'll receive before you send. No surprises, no hidden charges.</p>
                    </div>
                    <div class="feature">
                        <strong>‚ö° Instant updates</strong>
                        <p style="color: var(--muted); margin-top: 8px;">Rates update in real-time, ensuring you always get the best possible exchange rate.</p>
                    </div>
                </div>
            </div>

            <!-- üåç ENHANCED SECTION: ALL WORLD CURRENCIES -->
            <div id="world-rates">
                <h2 style="font-size:32px; font-weight:700; text-align:center;">üåç All Global Exchange Rates</h2>
                <p style="color:var(--muted); text-align:center; margin-top:8px;">
                    Live rates for 170+ currencies worldwide ‚Ä¢ Updated every minute
                </p>

                <!-- Search Box -->
                <input type="text" id="currency-search" class="search-box" placeholder="üîç Search currencies (e.g., EUR, Japanese Yen, ‚Ç¨)...">

                <div id="rates-table">
                    <table>
                        <thead>
                            <tr>
                                <th>Currency</th>
                                <th>Code</th>
                                <th>Rate (per USD)</th>
                                <th>Change</th>
                            </tr>
                        </thead>
                        <tbody id="rates-body"></tbody>
                    </table>
                </div>
            </div>

        </div>

        <!-- FOOTER -->
        <div class="footer">
            <div class="container">
                <div style="margin-bottom: 16px; font-size: 16px; font-weight: 600;">PRAC ‚Äî Pay ‚Ä¢ Receive ‚Ä¢ Convert</div>
                <div>¬© 2024 PRAC ¬∑ 
                    <a href="#" style="color: var(--muted); text-decoration: none;">Security</a> ¬∑ 
                    <a href="#" style="color: var(--muted); text-decoration: none;">Support</a> ¬∑ 
                    <a href="rates.html" style="color: var(--muted); text-decoration: none;">Rates</a>
                </div>
            </div>
        </div>

        <script>
            const API_BASE = 'http://localhost:8000';

            // Check authentication
            window.addEventListener('load', function() {
                const user = localStorage.getItem('prac_user');
                if (!user || !JSON.parse(user).loggedIn) {
                    window.location.href = 'login.html';
                    return;
                }

                loadRatesFromAPI();
                loadWorldRates();
            });

            // Currency symbols and names mapping
            const currencyData = {
                "USD": { symbol: "üíµ", name: "US Dollar" },
                "EUR": { symbol: "üí∂", name: "Euro" },
                "GBP": { symbol: "üí∑", name: "British Pound" },
                "JPY": { symbol: "üí¥", name: "Japanese Yen" },
                "CAD": { symbol: "üá®üá¶", name: "Canadian Dollar" },
                "AUD": { symbol: "üá¶üá∫", name: "Australian Dollar" },
                "CHF": { symbol: "üá®üá≠", name: "Swiss Franc" },
                "CNY": { symbol: "üá®üá≥", name: "Chinese Yuan" },
                "INR": { symbol: "üáÆüá≥", name: "Indian Rupee" },
                "MXN": { symbol: "üá≤üáΩ", name: "Mexican Peso" },
                "BRL": { symbol: "üáßüá∑", name: "Brazilian Real" },
                "RUB": { symbol: "üá∑üá∫", name: "Russian Ruble" },
                "KRW": { symbol: "üá∞üá∑", name: "South Korean Won" },
                "SGD": { symbol: "üá∏üá¨", name: "Singapore Dollar" },
                "NZD": { symbol: "üá≥üáø", name: "New Zealand Dollar" },
                "SEK": { symbol: "üá∏üá™", name: "Swedish Krona" },
                "NOK": { symbol: "üá≥üá¥", name: "Norwegian Krone" },
                "DKK": { symbol: "üá©üá∞", name: "Danish Krone" },
                "ZAR": { symbol: "üáøüá¶", name: "South African Rand" },
                "HKD": { symbol: "üá≠üá∞", name: "Hong Kong Dollar" },
                "TRY": { symbol: "üáπüá∑", name: "Turkish Lira" },
                "AED": { symbol: "üá¶üá™", name: "UAE Dirham" },
                "SAR": { symbol: "üá∏üá¶", name: "Saudi Riyal" },
                "THB": { symbol: "üáπüá≠", name: "Thai Baht" },
                "MYR": { symbol: "üá≤üáæ", name: "Malaysian Ringgit" },
                "IDR": { symbol: "üáÆüá©", name: "Indonesian Rupiah" },
                "PHP": { symbol: "üáµüá≠", name: "Philippine Peso" },
                "PLN": { symbol: "üáµüá±", name: "Polish Zloty" },
                "CZK": { symbol: "üá®üáø", name: "Czech Koruna" },
                "HUF": { symbol: "üá≠üá∫", name: "Hungarian Forint" },
                "ILS": { symbol: "üáÆüá±", name: "Israeli Shekel" },
                "EGP": { symbol: "üá™üá¨", name: "Egyptian Pound" },
                "NGN": { symbol: "üá≥üá¨", name: "Nigerian Naira" },
                "ARS": { symbol: "üá¶üá∑", name: "Argentine Peso" },
                "CLP": { symbol: "üá®üá±", name: "Chilean Peso" },
                "COP": { symbol: "üá®üá¥", name: "Colombian Peso" },
                "PEN": { symbol: "üáµüá™", name: "Peruvian Sol" },
                "VND": { symbol: "üáªüá≥", name: "Vietnamese Dong" },
                "PKR": { symbol: "üáµüá∞", name: "Pakistani Rupee" },
                "BDT": { symbol: "üáßüá©", name: "Bangladeshi Taka" },
                "LKR": { symbol: "üá±üá∞", name: "Sri Lankan Rupee" },
                "MAD": { symbol: "üá≤üá¶", name: "Moroccan Dirham" },
                "TND": { symbol: "üáπüá≥", name: "Tunisian Dinar" },
                "DZD": { symbol: "üá©üáø", name: "Algerian Dinar" },
                "QAR": { symbol: "üá∂üá¶", name: "Qatari Riyal" },
                "KWD": { symbol: "üá∞üáº", name: "Kuwaiti Dinar" },
                "BHD": { symbol: "üáßüá≠", name: "Bahraini Dinar" },
                "OMR": { symbol: "üá¥üá≤", name: "Omani Rial" },
                "UAH": { symbol: "üá∫üá¶", name: "Ukrainian Hryvnia" },
                "GEL": { symbol: "üá¨üá™", name: "Georgian Lari" },
                "RON": { symbol: "üá∑üá¥", name: "Romanian Leu" },
                "BGN": { symbol: "üáßüá¨", name: "Bulgarian Lev" },
                "HRK": { symbol: "üá≠üá∑", name: "Croatian Kuna" },
                "ISK": { symbol: "üáÆüá∏", name: "Icelandic Krona" },
                "MKD": { symbol: "üá≤üá∞", name: "Macedonian Denar" },
                "KES": { symbol: "üá∞üá™", name: "Kenyan Shilling" },
                "GHS": { symbol: "üá¨üá≠", name: "Ghanaian Cedi" },
                "TZS": { symbol: "üáπüáø", name: "Tanzanian Shilling" },
                "UGX": { symbol: "üá∫üá¨", name: "Ugandan Shilling" },
                "ETB": { symbol: "üá™üáπ", name: "Ethiopian Birr" },
                "JOD": { symbol: "üáØüá¥", name: "Jordanian Dinar" },
                "LBP": { symbol: "üá±üáß", name: "Lebanese Pound" },
                "IQD": { symbol: "üáÆüá∂", name: "Iraqi Dinar" },
                "KHR": { symbol: "üá∞üá≠", name: "Cambodian Riel" },
                "LAK": { symbol: "üá±üá¶", name: "Lao Kip" },
                "MMK": { symbol: "üá≤üá≤", name: "Myanmar Kyat" },
                "MNT": { symbol: "üá≤üá≥", name: "Mongolian T√∂gr√∂g" },
                "XOF": { symbol: "üåç", name: "West African CFA Franc" },
                "XAF": { symbol: "üåç", name: "Central African CFA Franc" },
                "XPF": { symbol: "üå∫", name: "CFP Franc" },
                "BBD": { symbol: "üáßüáß", name: "Barbadian Dollar" },
                "JMD": { symbol: "üáØüá≤", name: "Jamaican Dollar" },
                "TTD": { symbol: "üáπüáπ", name: "Trinidad & Tobago Dollar" },
                "UYU": { symbol: "üá∫üáæ", name: "Uruguayan Peso" },
                "BOB": { symbol: "üáßüá¥", name: "Bolivian Boliviano" },
                "PYG": { symbol: "üáµüáæ", name: "Paraguayan Guaran√≠" },
                "GTQ": { symbol: "üá¨üáπ", name: "Guatemalan Quetzal" },
                "MUR": { symbol: "üá≤üá∫", name: "Mauritian Rupee" },
                "SCR": { symbol: "üá∏üá®", name: "Seychellois Rupee" },
                "MZN": { symbol: "üá≤üáø", name: "Mozambican Metical" },
                "SRD": { symbol: "üá∏üá∑", name: "Surinamese Dollar" },
                "NPR": { symbol: "üá≥üáµ", name: "Nepalese Rupee" }
            };

            // Default data for currencies not in our mapping
            const getCurrencyInfo = (code) => {
                return currencyData[code] || { symbol: "üí≤", name: code };
            };

            // Fetch rates from your API
            async function loadRatesFromAPI() {
                try {
                    const response = await fetch(`${API_BASE}/rates`);
                    if (response.ok) {
                        const rates = await response.json();
                        displayRatesFromAPI(rates);
                    }
                } catch (error) {
                    console.error('Error fetching rates from API:', error);
                    // Fallback to mock data
                    displayRatesFromAPI({
                        "USD_EUR": 0.93,
                        "USD_GBP": 0.79,
                        "USD_MAD": 10.25,
                        "EUR_USD": 1.08,
                        "USD_JPY": 148.5,
                        "USD_CAD": 1.35,
                        "USD_AUD": 1.52
                    });
                }
            }

            function displayRatesFromAPI(rates) {
                const ratesGrid = document.getElementById('ratesGrid');
                if (!ratesGrid) return;

                const rateCards = [
                    { pair: "USD ‚Üí EUR", key: "USD_EUR" },
                    { pair: "USD ‚Üí GBP", key: "USD_GBP" },
                    { pair: "EUR ‚Üí USD", key: "EUR_USD" },
                    { pair: "USD ‚Üí JPY", key: "USD_JPY" },
                    { pair: "USD ‚Üí CAD", key: "USD_CAD" },
                    { pair: "USD ‚Üí AUD", key: "USD_AUD" }
                ];

                ratesGrid.innerHTML = rateCards.map(card => {
                    const rate = rates[card.key];
                    if (!rate) return '';

                    const change = (Math.random() - 0.5) * 0.1;
                    const changeColor = change >= 0 ? '#5af78e' : '#ff6b6b';
                    const changeSymbol = change >= 0 ? '+' : '';

                    return `
                        <div class="rate-card">
                            <div style="font-size: 14px; color: var(--muted);">${card.pair}</div>
                            <div class="rate-value">${rate.toFixed(4)}</div>
                            <div style="color: ${changeColor}; font-size: 14px; font-weight: 600;">
                                ${changeSymbol}${change.toFixed(2)}%
                            </div>
                            <div style="color: var(--muted); font-size: 12px; margin-top: 8px;">Updated just now</div>
                        </div>
                    `;
                }).join('');
            }

            // üåç ENHANCED ‚Äî FETCH ALL WORLD RATES
            let allRates = {};

            async function loadWorldRates() {
                try {
                    const res = await fetch(`${API_BASE}/rates/all`);
                    const data = await res.json();
                    allRates = data;

                    displayRates(allRates);
                } catch (error) {
                    console.error("Error fetching rates:", error);
                    // Fallback to mock data
                    allRates = {
                        "USD": 1.000000,
                        "EUR": 0.930000,
                        "GBP": 0.790000,
                        "JPY": 148.500000,
                        "CAD": 1.350000,
                        "AUD": 1.520000,
                        "CHF": 0.880000,
                        "CNY": 7.250000,
                        "INR": 83.000000,
                        "MXN": 17.500000,
                        "BRL": 5.200000,
                        "RUB": 92.000000,
                        "KRW": 1320.000000,
                        "SGD": 1.340000,
                        "NZD": 1.630000,
                        "SEK": 10.500000,
                        "NOK": 10.800000,
                        "DKK": 6.900000,
                        "ZAR": 18.800000,
                        "HKD": 7.820000,
                        "TRY": 32.000000,
                        "AED": 3.670000,
                        "SAR": 3.750000,
                        "THB": 36.000000,
                        "MYR": 4.720000,
                        "IDR": 15600.000000,
                        "PHP": 56.500000,
                        "PLN": 4.200000,
                        "CZK": 23.000000,
                        "HUF": 360.000000,
                        "ILS": 3.700000,
                        "EGP": 30.900000,
                        "NGN": 1600.000000,
                        "ARS": 850.000000,
                        "CLP": 950.000000,
                        "COP": 3900.000000,
                        "PEN": 3.800000,
                        "VND": 24750.000000,
                        "PKR": 280.000000,
                        "BDT": 110.000000,
                        "LKR": 320.000000
                    };
                    displayRates(allRates);
                }
            }

            function displayRates(rates) {
                const tbody = document.getElementById("rates-body");
                if (!tbody) return;
                
                tbody.innerHTML = "";

                const currencies = Object.keys(rates).sort();

                currencies.forEach(code => {
                    const info = getCurrencyInfo(code);
                    const rate = rates[code];
                    const change = (Math.random() - 0.5) * 2; // Simulated change
                    
                    const tr = document.createElement("tr");
                    tr.innerHTML = `
                        <td>
                            <span class="currency-symbol">${info.symbol}</span>
                            <span class="currency-name">${info.name}</span>
                        </td>
                        <td><span class="currency-code">${code}</span></td>
                        <td>${rate.toFixed(6)}</td>
                        <td>
                            <span class="rate-change ${change >= 0 ? 'positive' : 'negative'}">
                                ${change >= 0 ? '+' : ''}${change.toFixed(2)}%
                            </span>
                        </td>
                    `;
                    tbody.appendChild(tr);
                });
            }

            // Search functionality
            document.getElementById('currency-search').addEventListener('input', function(e) {
                const searchTerm = e.target.value.toLowerCase();
                const rows = document.querySelectorAll('#rates-body tr');
                
                rows.forEach(row => {
                    const text = row.textContent.toLowerCase();
                    row.style.display = text.includes(searchTerm) ? '' : 'none';
                });
            });

            // Logout functionality
            document.getElementById('logoutBtn').addEventListener('click', function(e) {
                e.preventDefault();
                localStorage.removeItem('prac_user');
                window.location.href = 'login.html';
            });

            // Initial load
            setInterval(loadRatesFromAPI, 30000); // Update every 30 seconds
            setInterval(loadWorldRates, 60000); // Update every minute
        </script>

    </body>
</html>